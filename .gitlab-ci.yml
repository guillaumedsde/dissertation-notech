stages:
  - build
  - deploy

build:
  image:
    name: pandoc/latex:latest
    entrypoint: [""]
  stage: build
  script:
    - apk add make
    - make all
  artifacts:
    paths:
      - "*.pdf"

build-latex:
  image: aergus/latex:latest
  stage: build
  before_script:
    - apt update
    - apt install make -y
  script:
    - make progress-report
    - mv build/main.pdf progress_report.pdf
  artifacts:
    paths:
      - "*.pdf"

pages:
  stage: deploy
  script:
    - mkdir public
    - cp *.pdf public/
  artifacts:
    paths:
      - public
  only:
    - master
